<%= turbo_frame_tag @post do %>
  <%= form_with model: [@user, @post], class: "post-form p-4 bg-slate-100 text-slate-900 rounded drop-shadow-lg flex flex-col gap-4 justify-between", data: { controller: 'attachment-preview', attachment_preview_width_value: 150, attachment_preview_height_value:100 } do |f| %>
    <%= f.text_field :body %>
    <% if @post.images.present? %>
      <div class="flex gap-2" data-attachment-preview-target="imgContainer">
        <% @post.images.each do |image| %>
          <%= image_tag image.variant(resize_to_limit: [150, 100]) %>
        <% end %>
      </div>
    <% end %>
    <%= f.file_field :images, multiple: true, data: { attachment_preview_target: "attachmentInput", action: "change->attachment-preview#setPreviewImages" } %>
    <div class="post-form-buttons self-end">
      <%= f.submit %>
    </div>
  <% end %>
<% end %>
